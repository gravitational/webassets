(self.webpackChunk_gravitational_teleport=self.webpackChunk_gravitational_teleport||[]).push([[35],{G6QT:function(t,e,n){var i,r,s;r=[n("ERkP"),n("aWzz"),n("Y3fD")],void 0===(s="function"==typeof(i=function(t,e,n){function i(t){return t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault(),!1}function r(t){return null==t?[]:Array.isArray(t)?t:[t]}function s(t){return null!=t&&1===t.length?t[0]:t}var o=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};return n({displayName:"ReactSlider",propTypes:{min:e.number,max:e.number,step:e.number,minDistance:e.number,defaultValue:e.oneOfType([e.number,e.arrayOf(e.number)]),value:e.oneOfType([e.number,e.arrayOf(e.number)]),orientation:e.oneOf(["horizontal","vertical"]),className:e.string,handleClassName:e.string,handleActiveClassName:e.string,withBars:e.bool,barClassName:e.string,pearling:e.bool,disabled:e.bool,snapDragDisabled:e.bool,invert:e.bool,onBeforeChange:e.func,onChange:e.func,onAfterChange:e.func,onSliderClick:e.func},getDefaultProps:function(){return{min:0,max:100,step:1,minDistance:0,defaultValue:0,orientation:"horizontal",className:"slider",handleClassName:"handle",handleActiveClassName:"active",barClassName:"bar",withBars:!1,pearling:!1,disabled:!1,snapDragDisabled:!1,invert:!1}},getInitialState:function(){var t=this._or(r(this.props.value),r(this.props.defaultValue));this.tempArray=t.slice(),this.pendingResizeTimeouts=[];for(var e=[],n=0;n<t.length;n++)t[n]=this._trimAlignValue(t[n],this.props),e.push(n);return{index:-1,upperBound:0,sliderLength:0,value:t,zIndices:e}},UNSAFE_componentWillReceiveProps:function(t){var e=this._or(r(t.value),this.state.value);this.tempArray=e.slice();for(var n=0;n<e.length;n++)this.state.value[n]=this._trimAlignValue(e[n],t);this.state.value.length>e.length&&(this.state.value.length=e.length),0===this.state.upperBound&&this._resize()},_or:function(e,n){var i=t.Children.count(this.props.children);switch(i){case 0:return e.length>0?e:n;case e.length:return e;case n.length:return n;default:return e.length===i&&n.length===i||window.console.warn(this.constructor.displayName+": Number of values does not match number of children."),function(t,e,n){for(var i=(e-t)/(n-1),r=[],s=0;s<n;s++)r.push(t+i*s);return r}(this.props.min,this.props.max,i)}},componentDidMount:function(){window.addEventListener("resize",this._handleResize),this._resize()},componentWillUnmount:function(){this._clearPendingResizeTimeouts(),window.removeEventListener("resize",this._handleResize)},getValue:function(){return s(this.state.value)},_resize:function(){var t=this.slider,e=this.handle0,n=t.getBoundingClientRect(),i=this._sizeKey(),r=n[this._posMaxKey()],s=n[this._posMinKey()];this.setState({upperBound:t[i]-e[i],sliderLength:Math.abs(r-s),handleSize:e[i],sliderStart:this.props.invert?r:s})},_handleResize:function(){var t=window.setTimeout(function(){this.pendingResizeTimeouts.shift(),this._resize()}.bind(this),0);this.pendingResizeTimeouts.push(t)},_clearPendingResizeTimeouts:function(){do{var t=this.pendingResizeTimeouts.shift();clearTimeout(t)}while(this.pendingResizeTimeouts.length)},_calcOffset:function(t){var e=this.props.max-this.props.min;return 0===e?0:(t-this.props.min)/e*this.state.upperBound},_calcValue:function(t){return t/this.state.upperBound*(this.props.max-this.props.min)+this.props.min},_buildHandleStyle:function(t,e){var n={position:"absolute",willChange:this.state.index>=0?this._posMinKey():"",zIndex:this.state.zIndices.indexOf(e)+1};return n[this._posMinKey()]=t+"px",n},_buildBarStyle:function(t,e){var n={position:"absolute",willChange:this.state.index>=0?this._posMinKey()+","+this._posMaxKey():""};return n[this._posMinKey()]=t,n[this._posMaxKey()]=e,n},_getClosestIndex:function(t){for(var e=Number.MAX_VALUE,n=-1,i=this.state.value,r=i.length,s=0;s<r;s++){var o=this._calcOffset(i[s]),a=Math.abs(t-o);a<e&&(e=a,n=s)}return n},_calcOffsetFromPosition:function(t){var e=t-this.state.sliderStart;return this.props.invert&&(e=this.state.sliderLength-e),e-this.state.handleSize/2},_forceValueFromPosition:function(t,e){var n=this._calcOffsetFromPosition(t),i=this._getClosestIndex(n),r=this._trimAlignValue(this._calcValue(n)),s=this.state.value.slice();s[i]=r;for(var o=0;o<s.length-1;o+=1)if(s[o+1]-s[o]<this.props.minDistance)return;this.setState({value:s},e.bind(this,i))},_getMousePosition:function(t){return[t["page"+this._axisKey()],t["page"+this._orthogonalAxisKey()]]},_getTouchPosition:function(t){var e=t.touches[0];return[e["page"+this._axisKey()],e["page"+this._orthogonalAxisKey()]]},_getKeyDownEventMap:function(){return{keydown:this._onKeyDown,focusout:this._onBlur}},_getMouseEventMap:function(){return{mousemove:this._onMouseMove,mouseup:this._onMouseUp}},_getTouchEventMap:function(){return{touchmove:this._onTouchMove,touchend:this._onTouchEnd}},_createOnKeyDown:function(t){return function(e){this.props.disabled||(this._start(t),this._addHandlers(this._getKeyDownEventMap()),i(e))}.bind(this)},_createOnMouseDown:function(t){return function(e){if(!this.props.disabled){var n=this._getMousePosition(e);this._start(t,n[0]),this._addHandlers(this._getMouseEventMap()),i(e)}}.bind(this)},_createOnTouchStart:function(t){return function(e){if(!(this.props.disabled||e.touches.length>1)){var n=this._getTouchPosition(e);this.startPosition=n,this.isScrolling=void 0,this._start(t,n[0]),this._addHandlers(this._getTouchEventMap()),function(t){t.stopPropagation&&t.stopPropagation()}(e)}}.bind(this)},_addHandlers:function(t){for(var e in t)document.addEventListener(e,t[e],!1)},_removeHandlers:function(t){for(var e in t)document.removeEventListener(e,t[e],!1)},_start:function(t,e){var n=document.activeElement,i=this["handle"+t];n&&n!=document.body&&n!=i&&n.blur&&n.blur(),this.hasMoved=!1,this._fireChangeEvent("onBeforeChange");var r=this.state.zIndices;r.splice(r.indexOf(t),1),r.push(t),this.setState((function(n){return{startValue:this.state.value[t],startPosition:void 0!==e?e:n.startPosition,index:t,zIndices:r}}))},_onMouseUp:function(){this._onEnd(this._getMouseEventMap())},_onTouchEnd:function(){this._onEnd(this._getTouchEventMap())},_onBlur:function(){this._onEnd(this._getKeyDownEventMap())},_onEnd:function(t){this._removeHandlers(t),this.setState({index:-1},this._fireChangeEvent.bind(this,"onAfterChange"))},_onMouseMove:function(t){var e=this._getMousePosition(t),n=this._getDiffPosition(e[0]),i=this._getValueFromPosition(n);this._move(i)},_onTouchMove:function(t){if(!(t.touches.length>1)){var e=this._getTouchPosition(t);if(void 0===this.isScrolling){var n=e[0]-this.startPosition[0],r=e[1]-this.startPosition[1];this.isScrolling=Math.abs(r)>Math.abs(n)}if(this.isScrolling)this.setState({index:-1});else{i(t);var s=this._getDiffPosition(e[0]),o=this._getValueFromPosition(s);this._move(o)}}},_onKeyDown:function(t){if(!(t.ctrlKey||t.shiftKey||t.altKey))switch(t.key){case"ArrowLeft":case"ArrowUp":return t.preventDefault(),this._moveDownOneStep();case"ArrowRight":case"ArrowDown":return t.preventDefault(),this._moveUpOneStep();case"Home":return this._move(this.props.min);case"End":return this._move(this.props.max);default:return}},_moveUpOneStep:function(){var t=this.state.value[this.state.index]+this.props.step;this._move(Math.min(t,this.props.max))},_moveDownOneStep:function(){var t=this.state.value[this.state.index]-this.props.step;this._move(Math.max(t,this.props.min))},_getValueFromPosition:function(t){var e=t/(this.state.sliderLength-this.state.handleSize)*(this.props.max-this.props.min);return this._trimAlignValue(this.state.startValue+e)},_getDiffPosition:function(t){var e=t-this.state.startPosition;return this.props.invert&&(e*=-1),e},_move:function(t){this.hasMoved=!0;var e=this.props,n=this.state,i=n.index,r=n.value,s=r.length,o=r[i],a=e.minDistance;if(!e.pearling){if(i>0){var l=r[i-1];t<l+a&&(t=l+a)}if(i<s-1){var u=r[i+1];t>u-a&&(t=u-a)}}r[i]=t,e.pearling&&s>1&&(t>o?(this._pushSucceeding(r,a,i),this._trimSucceeding(s,r,a,e.max)):t<o&&(this._pushPreceding(r,a,i),this._trimPreceding(s,r,a,e.min))),t!==o&&this.setState({value:r},this._fireChangeEvent.bind(this,"onChange"))},_pushSucceeding:function(t,e,n){var i,r;for(r=t[i=n]+e;null!=t[i+1]&&r>t[i+1];r=t[++i]+e)t[i+1]=this._alignValue(r)},_trimSucceeding:function(t,e,n,i){for(var r=0;r<t;r++){var s=i-r*n;e[t-1-r]>s&&(e[t-1-r]=s)}},_pushPreceding:function(t,e,n){var i,r;for(r=t[i=n]-e;null!=t[i-1]&&r<t[i-1];r=t[--i]-e)t[i-1]=this._alignValue(r)},_trimPreceding:function(t,e,n,i){for(var r=0;r<t;r++){var s=i+r*n;e[r]<s&&(e[r]=s)}},_axisKey:function(){var t=this.props.orientation;return"horizontal"===t?"X":"vertical"===t?"Y":void 0},_orthogonalAxisKey:function(){var t=this.props.orientation;return"horizontal"===t?"Y":"vertical"===t?"X":void 0},_posMinKey:function(){var t=this.props.orientation;return"horizontal"===t?this.props.invert?"right":"left":"vertical"===t?this.props.invert?"bottom":"top":void 0},_posMaxKey:function(){var t=this.props.orientation;return"horizontal"===t?this.props.invert?"left":"right":"vertical"===t?this.props.invert?"top":"bottom":void 0},_sizeKey:function(){var t=this.props.orientation;return"horizontal"===t?"clientWidth":"vertical"===t?"clientHeight":void 0},_trimAlignValue:function(t,e){return this._alignValue(this._trimValue(t,e),e)},_trimValue:function(t,e){return t<=(e=e||this.props).min&&(t=e.min),t>=e.max&&(t=e.max),t},_alignValue:function(t,e){var n=(t-(e=e||this.props).min)%e.step,i=t-n;return 2*Math.abs(n)>=e.step&&(i+=n>0?e.step:-e.step),parseFloat(i.toFixed(5))},_renderHandle:function(e,n,i){var r=this,s=this.props.handleClassName+" "+this.props.handleClassName+"-"+i+" "+(this.state.index===i?this.props.handleActiveClassName:"");return t.createElement("div",{ref:function(t){r["handle"+i]=t},key:"handle"+i,className:s,style:e,onMouseDown:this._createOnMouseDown(i),onTouchStart:this._createOnTouchStart(i),onFocus:this._createOnKeyDown(i),tabIndex:0,role:"slider","aria-valuenow":this.state.value[i],"aria-valuemin":this.props.min,"aria-valuemax":this.props.max,"aria-label":o(this.props.ariaLabel)?this.props.ariaLabel[i]:this.props.ariaLabel,"aria-valuetext":this.props.ariaValuetext},n)},_renderHandles:function(e){for(var n=e.length,i=this.tempArray,r=0;r<n;r++)i[r]=this._buildHandleStyle(e[r],r);var s=[],o=this._renderHandle;if(t.Children.count(this.props.children)>0)t.Children.forEach(this.props.children,(function(t,e){s[e]=o(i[e],t,e)}));else for(r=0;r<n;r++)s[r]=o(i[r],null,r);return s},_renderBar:function(e,n,i){var r=this;return t.createElement("div",{key:"bar"+e,ref:function(t){r["bar"+e]=t},className:this.props.barClassName+" "+this.props.barClassName+"-"+e,style:this._buildBarStyle(n,this.state.upperBound-i)})},_renderBars:function(t){var e=[],n=t.length-1;e.push(this._renderBar(0,0,t[0]));for(var i=0;i<n;i++)e.push(this._renderBar(i+1,t[i],t[i+1]));return e.push(this._renderBar(n+1,t[n],this.state.upperBound)),e},_onSliderMouseDown:function(t){if(!this.props.disabled){if(this.hasMoved=!1,!this.props.snapDragDisabled){var e=this._getMousePosition(t);this._forceValueFromPosition(e[0],function(t){this._start(t,e[0]),this._fireChangeEvent("onChange"),this._addHandlers(this._getMouseEventMap())}.bind(this))}i(t)}},_onSliderClick:function(t){if(!this.props.disabled&&this.props.onSliderClick&&!this.hasMoved){var e=this._getMousePosition(t),n=this._trimAlignValue(this._calcValue(this._calcOffsetFromPosition(e[0])));this.props.onSliderClick(n)}},_fireChangeEvent:function(t){this.props[t]&&this.props[t](s(this.state.value))},render:function(){for(var e=this,n=this.state,i=this.props,r=this.tempArray,s=n.value,o=s.length,a=0;a<o;a++)r[a]=this._calcOffset(s[a],a);var l=i.withBars?this._renderBars(r):null,u=this._renderHandles(r);return t.createElement("div",{ref:function(t){e.slider=t},style:{position:"relative"},className:i.className+(i.disabled?" disabled":""),onMouseDown:this._onSliderMouseDown,onClick:this._onSliderClick},l,u)}})})?i.apply(e,r):i)||(t.exports=s)},Isdb:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>Et});var i=n("ERkP"),r=n("Qm3L"),s=n("0NHO"),o=n("pH/e"),a=n("n2+9"),l=n("zsHH"),u=n("lwEh"),c=n("t3r+"),h=n("daAW"),p=n("Qjlk"),d=n("yLdc"),f=n("igdO");const m={menuListCss:()=>"\n  width: 250px;\n"},g=function(t){let{onLogout:e}=t;return i.createElement(s.kC,{alignItems:"center"},i.createElement(p.Oq,{buttonIconProps:{mr:2,ml:2,size:0,style:{fontSize:"16px"}},menuProps:m},i.createElement(p.sN,{as:h.OL,to:f.Z.routes.root},i.createElement(p.ZH,{as:d.SK8,mr:"2"}),"Home"),i.createElement(p.sN,null,i.createElement(s.DF,{my:3,block:!0,onClick:e},"Sign Out"))))};var v=n("oGse"),_=n("23ay"),y=n("lr/o"),E=n("SagJ"),x=n("G6QT");const b=n.n(x)();function w(t){const e=t.isPlaying?d.id6:d.rNN;return i.createElement(O,{style:t.style,id:t.id},i.createElement(N,{onClick:t.toggle},i.createElement(e,null)),i.createElement(P,{onChange:t.onPlaySpeedChange}),i.createElement(C,null,t.time),i.createElement(D,null,i.createElement(b,{min:t.min,max:t.max,value:t.current,onChange:t.move,defaultValue:1,withBars:!0,className:"grv-slider"})))}function P(t){return t.onChange?i.createElement(M,{onChange:e=>{t.onChange(parseFloat(e.target.value))},defaultValue:"1.0"},i.createElement("option",{value:"0.25"},"0.25x"),i.createElement("option",{value:"0.5"},"0.5x"),i.createElement("option",{value:"1.0"},"1.0x"),i.createElement("option",{value:"2.0"},"2.0x"),i.createElement("option",{value:"4.0"},"4.0x"),i.createElement("option",{value:"8.0"},"8.0x"),i.createElement("option",{value:"16.0"},"16.0x")):null}const M=r.ZP.select(["margin-left:8px;border:none;background:",";color:",";"],u.O.dark,u.O.light),D=r.ZP.div(["display:flex;flex:1;flex-direction:column;"]),C=r.ZP.div((t=>`\n  text-align: center;\n  font-family: ${t.theme.fonts.mono};\n  font-size: ${t.theme.fontSizes[1]}px;\n  line-height: 24px;\n  width: 80px;\n  opacity: 0.56;\n`)),N=r.ZP.button(["background:",";border:none;color:",";cursor:pointer;font-size:24px;height:24px;outline:none;opacity:0.87;padding:0;text-align:center;transition:all 0.3s;width:24px;&:hover{opacity:1;.icon{color:",";}}.icon{height:24px;width:24px;}"],u.O.dark,u.O.light,u.O.progressBarColor),O=r.ZP.div(["background-color:",";display:flex;color:",";padding:16px;.grv-slider{display:block;padding:0;height:24px;}.grv-slider .bar{border-radius:200px;height:8px;margin:8px 0;}.grv-slider .handle{background-color:",";border-radius:200px;box-shadow:0 0 4px rgba(0,0,0,0.12),0 4px 4px rgba(0,0,0,0.24);width:16px;height:16px;left:-8px;top:4px;}.grv-slider .bar-0{background-color:",";box-shadow:none;}.grv-slider .bar-1{background-color:",";}"],u.O.dark,u.O.light,u.O.light,u.O.success,u.O.text);var I=n("nsO7");function T(t){const e=function(t){const[e,n]=i.useState((()=>S(t)));return i.useEffect((()=>{const e=(0,I.throttle)((function(){const e=S(t);n(e)}),Math.max(Math.min(.025*t.duration,500),20));return t.on("change",e),function(){e.cancel(),t.stop(),t.removeAllListeners()}}),[t]),e}(t.tty);return i.createElement(w,e)}function S(t){return{max:t.duration,min:1,time:t.getCurrentTime(),isLoading:t.isLoading(),isPlaying:t.isPlaying(),current:t.current,move:function(e){t.move(e)},toggle:function(){t.isPlaying()?t.stop():t.play()}}}var A=n("XeJL"),R=n("W/SA");function k(){return k=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},k.apply(this,arguments)}function F(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function z(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?F(Object(n),!0).forEach((function(e){L(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):F(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function L(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const B=t=>{const{playerClient:e,durationMs:n}=t,r=(0,i.useRef)();let s=1;const o=t=>(0,R.Z)((0,A.QH)(new Date(t)),"mm:ss"),[a,l]=(0,i.useState)({max:n,min:0,current:0,time:o(0),isPlaying:!0}),u=(t,e)=>z(z({},t),{},{current:e,time:o(e)});return(0,i.useEffect)((()=>{if(e){const t=t=>{r.current=setInterval((()=>{l((e=>{const r=e.current+25*t;return r<=n?u(e,r):(i(),u(e,n))}))}),25)};t(s);const i=()=>{o.cancel(),clearInterval(r.current)},o=(0,I.throttle)((t=>{l((e=>u(e,t)))}),50);return e.addListener(_.OZ.UPDATE_CURRENT_TIME,(t=>o(t))),e.addListener(_.OZ.TOGGLE_PLAY_PAUSE,(()=>{l((e=>(e.isPlaying?i():t(s),z(z({},e),{},{isPlaying:!e.isPlaying}))))})),e.addListener(_.OZ.PLAY_SPEED,(e=>{s=e,l((e=>(e.isPlaying&&(i(),t(s)),z(z({},e),{},{isPlaying:e.isPlaying}))))})),()=>{e.shutdown(),i()}}}),[e]),i.createElement(w,k({},a,{toggle:()=>e.togglePlayPause(),onPlaySpeedChange:t=>e.setPlaySpeed(t),move:()=>{},style:t.style,id:t.id}))},Y=t=>{let{sid:e,clusterId:n,durationMs:r}=t;const{playerClient:o,tdpCliOnPngFrame:a,tdpCliOnClientScreenSpec:l,tdpCliOnWsClose:u,tdpCliOnTdpError:c,attempt:h}=j({sid:e,clusterId:n}),p="success"===h.status||""===h.status,d="processing"!==h.status;return i.createElement(V,null,"processing"===h.status&&i.createElement(s.xu,{textAlign:"center",m:10},i.createElement(s.z$,null)),"failed"===h.status&&i.createElement(Z,{my:4,mx:10,children:h.statusText}),i.createElement(E.Z,{tdpCli:o,tdpCliInit:!0,tdpCliOnPngFrame:a,tdpCliOnClientScreenSpec:l,tdpCliOnWsClose:u,tdpCliOnTdpError:c,onContextMenu:()=>!0,style:{alignSelf:"center",overflow:"hidden",display:p?"flex":"none"}}),i.createElement(B,{playerClient:o,durationMs:r,style:{display:d?"flex":"none"},id:"progressBarDesktop"}))},j=t=>{let{sid:e,clusterId:n}=t;const[r,s]=(0,i.useState)(null),{attempt:o,setAttempt:a}=(0,v.Z)("processing");return(0,i.useEffect)((()=>{s(new _.pz(f.Z.api.desktopPlaybackWsAddr.replace(":fqdn",(0,y.Lp)()).replace(":clusterId",n).replace(":sid",e).replace(":token",(0,y.hP)())))}),[n,e]),(0,i.useEffect)((()=>{if(r)return r.addListener(_.OZ.SESSION_END,(()=>{a({status:""})})),r.addListener(_.OZ.PLAYBACK_ERROR,(t=>{a({status:"failed",statusText:`There was an error while playing this session: ${t.message}`})})),()=>{r.shutdown()}}),[r]),{playerClient:r,tdpCliOnPngFrame:(t,e)=>{t.drawImage(e.data,e.left,e.top)},tdpCliOnClientScreenSpec:(t,e)=>{const n=t.parentElement,i=n.children.namedItem("progressBarDesktop"),r=n.clientWidth,s=n.clientHeight-i.clientHeight,o=e.width/e.height,l=r/s;o>l?t.style.height=r*e.height/e.width+"px":o<l&&(t.style.width=s*e.width/e.height+"px"),t.width=e.width,t.height=e.height,a({status:"success"})},tdpCliOnWsClose:()=>{a((t=>""!==t.status&&"failed"!==t.status?{status:"failed",statusText:"connection to the server failed for an unknown reason"}:t))},tdpCliOnTdpError:t=>{const{err:e}=t;a({status:"failed",statusText:e.message})},attempt:o}},V=r.ZP.div(["display:flex;flex-direction:column;justify-content:center;width:100%;height:100%;"]),Z=(0,r.ZP)(s.bZ)(["align-self:center;min-width:450px;margin-bottom:auto;"]);var K=n("GmLw"),H=n("HAGg"),U=n("dCLP"),W=n("wsJx");const G=K.Buffer,$=5242880;class Q{constructor(t){let{url:e}=t;this.url=e,this.events=[]}getDuration(){const t=this.events.length;return 0===t?0:this.events[t-1].msNormalized}init(){return this._fetchEvents().then((t=>{this.events=t;const e=this.events.filter(q);if(0!==e.length)return this._fetchContent(e).then((t=>{this._populatePrintEvents(t,e)}))}))}_fetchEvents(){const t=this.url+"/events";return y.ZP.get(t).then((t=>t.events?this._createEvents(t.events):[]))}_fetchContent(t){let e=t[0].offset;const n=t.length-1,i=t[n].offset-e+t[n].bytes,r=Math.ceil(i/$),s=[];for(let t=0;t<r;t++){const t=`${this.url}/stream?offset=${e}&bytes=5242880`;s.push(y.ZP.fetch(t,{Accept:"text/plain","Content-Type":"text/plain; charset=utf-8"}).then((t=>t.text()))),e+=$}return Promise.all(s).then((t=>{const e=t.reduce(((t,e)=>t+e),"");return new G(e)}))}_populatePrintEvents(t,e){let n=e[0].bytes;e[0].data=t.slice(0,n).toString("utf8");for(var i=1;i<e.length;i++){let{bytes:r}=e[i];e[i].data=t.slice(n,n+r).toString("utf8"),n+=r}}_createEvents(t){let e,n,i=[];for(let r=0;r<t.length;r++){const{ms:s,event:o,offset:a,time:l,bytes:u}=t[r];if(o!==W.tw.RESIZE&&o!==W.tw.START||([e,n]=t[r].size.split(":")),o===W.tw.END){const t=new Date(i[0].time),e=new Date(l).getTime()-t.getTime();i.push({eventType:o,ms:e,time:new Date(l)});break}o===W.tw.PRINT&&i.push({eventType:W.tw.PRINT,ms:s,bytes:u,offset:a,data:null,w:Number(e),h:Number(n),time:new Date(l)})}return this._normalizeEventsByTime(i)}_normalizeEventsByTime(t){if(!t||0===t.length)return[];t.forEach((t=>{t.displayTime=function(t){if(t<=0)return"00:00";let e=Math.floor(t/1e3)%31536e3%86400,n=Math.floor(e/3600),i=Math.floor(e%3600/60),r=e%3600%60;return i=i>9?i:"0"+i,r=r>9?r:"0"+r,n=n>0?n+":":"",`${n}${i}:${r}`}(t.ms),t.ms=t.ms>0?Math.floor(t.ms/10):0,t.msNormalized=t.ms}));let e=t[0],n=[];for(let r=1;r<t.length;r++){const s=e.w===t[r].w&&e.h===t[r].h,o=t[r].ms-e.ms;o<2&&s?e.bytes+=t[r].bytes:(t[r].msNormalized=e.msNormalized+((i=o)>=25&&i<50?25:i>=50&&i<100?50:i>=100?100:i),n.push(e),e=t[r])}var i;return-1===n.indexOf(e)&&n.push(e),n}}function q(t){return t.eventType===W.tw.PRINT}const X=H.Z.create("TtyPlayer"),J=(K.Buffer,"PLAYING"),tt="ERROR",et="PAUSED",nt="LOADING";class it extends U.Z{constructor(t){super({}),this.currentEventIndex=0,this.current=0,this.duration=0,this.status=nt,this.statusText="",this._posToEventIndexMap=[],this._eventProvider=t,this._chunkQueue=[],this._writeInFlight=!1}send(){}connect(){return this.status=nt,this._change(),this._eventProvider.init().then((()=>{this._init(),this.status=et})).catch((t=>{X.error("unable to init event provider",t),this._handleError(t)})).finally(this._change.bind(this))}pauseFlow(){this._writeInFlight=!0}resumeFlow(){this._writeInFlight=!1,this._chunkDequeue()}move(t){if(!this.isReady())return;void 0===t&&(t=this.current+1),t<0&&(t=0),t>this.duration&&this.stop();const e=this._getEventIndex(t)+1;if(e===this.currentEventIndex)return this.current=t,void this._change();const n=this.currentEventIndex>e;try{n&&(this._chunkQueue=[],this.emit(W.dw.RESET));const i=n?0:this.currentEventIndex,r=e,s=this._eventProvider.events.slice(i,r).filter(q);this._render(s),this.currentEventIndex=e,this.current=t,this._change()}catch(t){X.error("move",t),this._handleError(t)}}stop(){this.status=et,this.timer=clearInterval(this.timer),this._change()}play(){this.status!==J&&(this.status=J,this.current>=this.duration&&(this.current=0,this.emit(W.dw.RESET)),this.timer=setInterval(this.move.bind(this),10),this._change())}getCurrentTime(){if(this.currentEventIndex){let{displayTime:t}=this._eventProvider.events[this.currentEventIndex-1];return t}return"--:--"}getEventCount(){return this._eventProvider.events.length}isLoading(){return this.status===nt}isPlaying(){return this.status===J}isError(){return this.status===tt}isReady(){return this.status!==nt&&this.status!==tt}disconnect(){}_init(){this.duration=this._eventProvider.getDuration(),this._eventProvider.events.forEach((t=>this._posToEventIndexMap.push(t.msNormalized)))}_chunkDequeue(){const t=this._chunkQueue.shift();if(!t)return;const e=t.data.join("");this.emit(W.dw.RESIZE,{h:t.h,w:t.w}),this.emit(W.dw.DATA,e)}_render(t){if(!t||0===t.length)return;const e=[{data:[t[0].data],w:t[0].w,h:t[0].h}];let n=e[0];for(let i=1;i<t.length;i++)n.w===t[i].w&&n.h===t[i].h?n.data.push(t[i].data):(n={data:[t[i].data],w:t[i].w,h:t[i].h},e.push(n));this._chunkQueue=[...this._chunkQueue,...e],this._writeInFlight||this._chunkDequeue()}_getEventIndex(t){const e=this._posToEventIndexMap;for(var n=0,i=e.length-1;i-n>1;){const r=Math.floor((n+i)/2);e[r]<t?n=r:i=r}return t-e[n]<=e[i]-t?n:i}_change(){this.emit("change")}_handleError(t){this.status=tt,this.statusText=t.message}}var rt=n("MBdU"),st=n("rSbH"),ot=n("6cGw");class at extends st.Z{connect(){this.term.options.scrollback=0}resize(t,e){this.term.focus(),super.resize(t,e)}_requestResize(){}}const lt=function(t){let{tty:e}=t;const n=(0,i.useRef)(),s=(0,r.Fg)();return(0,i.useEffect)((()=>{const t=new at(e,{el:n.current,fontFamily:s.fonts.mono,fontSize:(0,rt.Z)().isMac?12:14});function i(t){t.stopPropagation()}return t.open(),t.term.focus(),t.tty.on(W.dw.DATA,(()=>{t.term.textarea.scrollIntoView(!1)})),window.addEventListener("wheel",i,!0),function(){t.destroy(),window.removeEventListener("wheel",i,!0)}}),[e]),i.createElement(ot.Z,{style:{overflow:"auto"},ref:n})};function ut(){return ut=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},ut.apply(this,arguments)}function ct(t){let{sid:e,clusterId:n}=t;const{tty:r}=function(t,e){const n=i.useMemo((()=>{const n=f.Z.getTerminalSessionUrl({clusterId:t,sid:e});return new it(new Q({url:n}))}),[e,t]),[,r]=i.useState(n.status);return i.useEffect((()=>(n.on("change",(function(){r(n.status)})),n.connect().then((()=>{n.play()})),function(){n.stop(),n.removeAllListeners()})),[n]),{tty:n}}(n,e),{statusText:a,status:l}=r,u=r.getEventCount(),c=l===nt;return l===tt?i.createElement(ht,null,i.createElement(o.b0,{m:10},a||"Error")):c?i.createElement(ht,null,i.createElement(s.z$,null)):c||0!==u?i.createElement(pt,null,i.createElement(s.kC,{flex:"1",flexDirection:"column",overflow:"auto"},i.createElement(lt,{tty:r})),u>0&&i.createElement(T,{tty:r})):i.createElement(ht,null,i.createElement(s.xv,{typography:"h4"},"Recording for this session is not available."))}const ht=t=>i.createElement(s.xu,ut({width:"100%",textAlign:"center",p:3},t)),pt=r.ZP.div(["display:flex;height:100%;width:100%;position:absolute;flex-direction:column;flex:1;justify-content:space-between;"]);var dt=n("IoKG");function ft(){return ft=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},ft.apply(this,arguments)}const mt=t=>{let{title:e}=t;return i.createElement(gt,null,e)},gt=(0,r.ZP)(s.xu)(["max-width:200px;height:100%;outline:none;text-transform:uppercase;text-decoration:none;color:inherit;align-items:center;display:flex;font-size:11px;justify-content:center;flex:1;&:hover,&.active,&:focus{color:",";}"," ",""],(t=>t.theme.colors.primary.contrastText),(t=>{let{theme:e}=t;return{backgroundColor:e.colors.bgTerminal,color:e.colors.primary.contrastText,fontWeight:"bold",transition:"none"}}),(t=>{let{theme:e}=t;return{border:"none",borderRight:`1px solid ${e.colors.bgTerminal}`,"&:hover, &:focus":{color:e.colors.primary.contrastText,transition:"color .3s"}}})),vt=(0,r.ZP)(s.kC)(["",""],dt.cp),_t=t=>i.createElement(vt,ft({height:"40px",color:"text.secondary",as:"nav"},t)),yt=r.ZP.div(["display:flex;height:100%;width:100%;position:absolute;flex-direction:column;.terminal .xterm-viewport{overflow-y:hidden !important;}"]),Et=function(){const{sid:t,clusterId:e}=(0,a.UO)(),{search:n}=(0,a.TH)(),r=(0,l.Z)(),h=(0,c.r)("recordingType",n),p=Number((0,c.r)("durationMs",n)),d="ssh"===h||"k8s"===h||"desktop"===h,f=Number.isInteger(p)&&p>0;return document.title=`${e} â€¢ Play ${t}`,d?"desktop"!==h||f?i.createElement(yt,null,i.createElement(s.kC,{bg:u.O.primary.light,height:"38px"},i.createElement(_t,{flex:"1 0"},i.createElement(mt,{title:"Session Player"})),i.createElement(g,{onLogout:function(){r.logout()}})),i.createElement(s.kC,{bg:u.O.bgTerminal,flex:"1",style:{overflow:"auto",position:"relative"}},"desktop"===h?i.createElement(Y,{sid:t,clusterId:e,durationMs:p}):i.createElement(ct,{sid:t,clusterId:e}))):i.createElement(yt,null,i.createElement(s.xu,{textAlign:"center",mx:10,mt:5},i.createElement(o.b0,{mb:0},"Invalid query parameter durationMs:"," ",(0,c.r)("durationMs",n),", should be an integer."))):i.createElement(yt,null,i.createElement(s.xu,{textAlign:"center",mx:10,mt:5},i.createElement(o.b0,{mb:0},"Invalid query parameter recordingType: ",h,", should be 'ssh' or 'desktop'")))}},ttFy:(t,e,n)=>{"use strict";var i=n("maj8"),r={};function s(t,e,n,i,r,s,o,a){if(!t){var l;if(void 0===e)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[n,i,r,s,o,a],c=0;(l=new Error(e.replace(/%s/g,(function(){return u[c++]})))).name="Invariant Violation"}throw l.framesToPop=1,l}}var o="mixins";t.exports=function(t,e,n){var a=[],l={mixins:"DEFINE_MANY",statics:"DEFINE_MANY",propTypes:"DEFINE_MANY",contextTypes:"DEFINE_MANY",childContextTypes:"DEFINE_MANY",getDefaultProps:"DEFINE_MANY_MERGED",getInitialState:"DEFINE_MANY_MERGED",getChildContext:"DEFINE_MANY_MERGED",render:"DEFINE_ONCE",componentWillMount:"DEFINE_MANY",componentDidMount:"DEFINE_MANY",componentWillReceiveProps:"DEFINE_MANY",shouldComponentUpdate:"DEFINE_ONCE",componentWillUpdate:"DEFINE_MANY",componentDidUpdate:"DEFINE_MANY",componentWillUnmount:"DEFINE_MANY",UNSAFE_componentWillMount:"DEFINE_MANY",UNSAFE_componentWillReceiveProps:"DEFINE_MANY",UNSAFE_componentWillUpdate:"DEFINE_MANY",updateComponent:"OVERRIDE_BASE"},u={getDerivedStateFromProps:"DEFINE_MANY_MERGED"},c={displayName:function(t,e){t.displayName=e},mixins:function(t,e){if(e)for(var n=0;n<e.length;n++)p(t,e[n])},childContextTypes:function(t,e){t.childContextTypes=i({},t.childContextTypes,e)},contextTypes:function(t,e){t.contextTypes=i({},t.contextTypes,e)},getDefaultProps:function(t,e){t.getDefaultProps?t.getDefaultProps=f(t.getDefaultProps,e):t.getDefaultProps=e},propTypes:function(t,e){t.propTypes=i({},t.propTypes,e)},statics:function(t,e){!function(t,e){if(e)for(var n in e){var i=e[n];if(e.hasOwnProperty(n)){if(s(!(n in c),'ReactClass: You are attempting to define a reserved property, `%s`, that shouldn\'t be on the "statics" key. Define it as an instance property instead; it will still be accessible on the constructor.',n),n in t)return s("DEFINE_MANY_MERGED"===(u.hasOwnProperty(n)?u[n]:null),"ReactClass: You are attempting to define `%s` on your component more than once. This conflict may be due to a mixin.",n),void(t[n]=f(t[n],i));t[n]=i}}}(t,e)},autobind:function(){}};function h(t,e){var n=l.hasOwnProperty(e)?l[e]:null;y.hasOwnProperty(e)&&s("OVERRIDE_BASE"===n,"ReactClassInterface: You are attempting to override `%s` from your class specification. Ensure that your method names do not overlap with React methods.",e),t&&s("DEFINE_MANY"===n||"DEFINE_MANY_MERGED"===n,"ReactClassInterface: You are attempting to define `%s` on your component more than once. This conflict may be due to a mixin.",e)}function p(t,n){if(n){s("function"!=typeof n,"ReactClass: You're attempting to use a component class or function as a mixin. Instead, just use a regular object."),s(!e(n),"ReactClass: You're attempting to use a component as a mixin. Instead, just use a regular object.");var i=t.prototype,r=i.__reactAutoBindPairs;for(var a in n.hasOwnProperty(o)&&c.mixins(t,n.mixins),n)if(n.hasOwnProperty(a)&&a!==o){var u=n[a],p=i.hasOwnProperty(a);if(h(p,a),c.hasOwnProperty(a))c[a](t,u);else{var d=l.hasOwnProperty(a);if("function"!=typeof u||d||p||!1===n.autobind)if(p){var g=l[a];s(d&&("DEFINE_MANY_MERGED"===g||"DEFINE_MANY"===g),"ReactClass: Unexpected spec policy %s for key %s when mixing in component specs.",g,a),"DEFINE_MANY_MERGED"===g?i[a]=f(i[a],u):"DEFINE_MANY"===g&&(i[a]=m(i[a],u))}else i[a]=u;else r.push(a,u),i[a]=u}}}}function d(t,e){for(var n in s(t&&e&&"object"==typeof t&&"object"==typeof e,"mergeIntoWithNoDuplicateKeys(): Cannot merge non-objects."),e)e.hasOwnProperty(n)&&(s(void 0===t[n],"mergeIntoWithNoDuplicateKeys(): Tried to merge two objects with the same key: `%s`. This conflict may be due to a mixin; in particular, this may be caused by two getInitialState() or getDefaultProps() methods returning objects with clashing keys.",n),t[n]=e[n]);return t}function f(t,e){return function(){var n=t.apply(this,arguments),i=e.apply(this,arguments);if(null==n)return i;if(null==i)return n;var r={};return d(r,n),d(r,i),r}}function m(t,e){return function(){t.apply(this,arguments),e.apply(this,arguments)}}function g(t,e){return e.bind(t)}var v={componentDidMount:function(){this.__isMounted=!0}},_={componentWillUnmount:function(){this.__isMounted=!1}},y={replaceState:function(t,e){this.updater.enqueueReplaceState(this,t,e)},isMounted:function(){return!!this.__isMounted}},E=function(){};return i(E.prototype,t.prototype,y),function(t){var e=function(t,i,o){this.__reactAutoBindPairs.length&&function(t){for(var e=t.__reactAutoBindPairs,n=0;n<e.length;n+=2){var i=e[n],r=e[n+1];t[i]=g(t,r)}}(this),this.props=t,this.context=i,this.refs=r,this.updater=o||n,this.state=null;var a=this.getInitialState?this.getInitialState():null;s("object"==typeof a&&!Array.isArray(a),"%s.getInitialState(): must return an object or null",e.displayName||"ReactCompositeComponent"),this.state=a};for(var i in e.prototype=new E,e.prototype.constructor=e,e.prototype.__reactAutoBindPairs=[],a.forEach(p.bind(null,e)),p(e,v),p(e,t),p(e,_),e.getDefaultProps&&(e.defaultProps=e.getDefaultProps()),s(e.prototype.render,"createClass(...): Class specification must implement a `render` method."),l)e.prototype[i]||(e.prototype[i]=null);return e}}},Y3fD:(t,e,n)=>{"use strict";var i=n("ERkP"),r=n("ttFy");if(void 0===i)throw Error("create-react-class could not find the React object. If you are using script tags, make sure that React is being loaded before create-react-class.");var s=(new i.Component).updater;t.exports=r(i.Component,i.isValidElement,s)}}]);