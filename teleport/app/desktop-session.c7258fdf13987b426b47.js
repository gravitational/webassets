"use strict";(self.webpackChunk_gravitational_teleport=self.webpackChunk_gravitational_teleport||[]).push([[456],{1112:(e,t,n)=>{n.r(t),n.d(t,{default:()=>ie});var r=n(2784),o=n(7849),i=n(9124),s=n(9161),a=n(2282),c=n(4523),l=n(4517),u=n(4696),p=n(2070),d=n(130),h=n(8230),f=n(3958),m=n(1727),g=n(1452),y=n(7278),b=n(3228),v=n(917),w=n(3757),E=n(7559),C=n(3937);function O(e){const{showShareDirectory:t,onShareDirectory:n,onDisconnect:i}=e;return r.createElement(o.kC,{alignItems:"center"},r.createElement(C.Oq,{buttonIconProps:{ml:4,size:0,color:"text.secondary",style:{fontSize:"20px"}},menuProps:S},t&&r.createElement(C.sN,{onClick:n},r.createElement(C.ZH,{as:w.GSs,mr:"2"}),"Share Directory (preview)"),r.createElement(C.sN,{onClick:i},r.createElement(C.ZH,{as:w.Lk_,mr:"2"}),"Disconnect")))}const S={menuListCss:()=>"\n  width: 250px;\n"};function x(){return x=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},x.apply(this,arguments)}function P(e){const[t,n]=(0,r.useState)(!1),[i,s]=(0,r.useState)(!1),a=(0,r.useRef)(),c=(0,v.Fg)();(0,r.useEffect)((()=>(!t&&e.isAutoRemovable&&(a.current=setTimeout(e.onRemove,e.autoRemoveDurationMs||1e4)),()=>{a.current&&clearTimeout(a.current)})),[t]);const l=r.createElement(o.Ei,{size:0,ml:1,mr:-1,style:{visibility:t?"visible":"hidden"},onClick:t=>{t.stopPropagation(),e.onRemove()}},r.createElement(w.x8P,null));return r.createElement(L,x({py:2,pl:3,pr:2,onMouseOver:()=>{!1===t&&n(!0)},onMouseLeave:()=>{!0===t&&n(!1)},onClick:function(){s((e=>!e))}},e),r.createElement(o.kC,{alignItems:"center",mr:1,minWidth:"0",width:"100%"},r.createElement(e.Icon,{color:e.getColor(c),mr:3,fontSize:16}),function(e,t,n){const i=t?D:j;return"string"==typeof e?r.createElement(o.kC,{justifyContent:"space-between",width:"100%"},r.createElement(k,{typography:"body1",fontSize:13,lineHeight:20,$_css:i},e),n):"object"==typeof e?r.createElement(o.kC,{flexDirection:"column",minWidth:"0",width:"100%"},r.createElement(T,null,r.createElement(_,{fontSize:14,bold:!0,mr:"30px"},e.title),r.createElement(A,null,n)),r.createElement(W,{fontSize:13,title:e.description,lineHeight:20,color:"text.secondary",$_css2:i},e.description)):void 0}(e.item.content,i,l)))}const D=(0,v.iv)(["line-height:20px;overflow-wrap:break-word;white-space:pre-line;"]),j=(0,v.iv)(["",";display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:3;"],D),L=(0,v.ZP)(o.kC)(["flex-direction:row;justify-content:space-between;background:",";min-height:40px;width:320px;box-shadow:0 4px 16px rgba(0,0,0,0.24);color:",";border-radius:4px;cursor:pointer;"],(e=>e.theme.colors.primary.light),(e=>e.theme.colors.text.primary));var k=(0,v.ZP)(o.xv)(["",""],(e=>e.$_css)),T=(0,v.ZP)("div")(["position:relative;"]),_=(0,v.ZP)(o.xv)(["line-height:20px;"]),A=(0,v.ZP)("div")(["position:absolute;top:0;right:0;"]),W=(0,v.ZP)(o.xv)(["",""],(e=>e.$_css2)),M=n(9488);function R(e){let{warnings:t,onRemoveWarning:n}=e;const[i,s]=(0,r.useState)(!1),a=(0,r.useRef)(null),c=()=>{t.length>0&&s((e=>!e))};return 0===t.length&&i&&s(!1),function(e,t){(0,r.useEffect)((()=>{const n=n=>{e.current&&!e.current.contains(n.target)&&t()};return document.addEventListener("mousedown",n),document.addEventListener("touchstart",n),()=>{document.removeEventListener("mousedown",n),document.removeEventListener("touchstart",n)}}),[e,t])}(a,(()=>{s((e=>{if(e)return!1}))})),r.createElement(K,{ref:a},r.createElement(N,{title:"Warnings",hasWarnings:t.length>0,px:2,onClick:c},r.createElement(o.kC,{alignItems:"center",justifyContent:"space-between"},r.createElement(Z,{mr:2})," ",t.length)),i&&r.createElement(I,{mt:3,p:2,style:{maxHeight:window.innerHeight/4}},r.createElement(o.kC,{alignItems:"center",justifyContent:"space-between"},r.createElement(o.xv,{typography:"h6",px:3,style:{overflow:"visible"}},t.length," ",t.length>1?"Warnings":"Warning"),r.createElement(o.Ei,{size:1,ml:1,mr:2,onClick:c},r.createElement(w.x8P,null))),r.createElement(U,{flexWrap:"wrap",gap:2},t.map((e=>r.createElement(P,{key:e.id,item:e,onRemove:()=>n(e.id),Icon:w.v3j,getColor:e=>e.colors.warning,isAutoRemovable:!1}))))))}const Z=(0,v.ZP)(w.v3j)(["font-weight:",";font-size:",";align-self:'center';"],(e=>{let{theme:t}=e;return t.fontWeights.bold}),(e=>{let{theme:t}=e;return t.fontSizes[2]+"px"})),N=(0,v.ZP)(o.zx)(["min-height:0;height:",";background-color:",";&:hover,&:focus{background-color:",";}"],(e=>{let{theme:t}=e;return t.fontSizes[7]+"px"}),(e=>e.hasWarnings?e.theme.colors.warning:e.theme.colors.action.disabled),(e=>e.hasWarnings?M.$y.A700:e.theme.colors.action.disabled)),I=(0,v.ZP)(o.Zb)(["display:flex;flex-direction:column;position:absolute;right:0;top:",";background-color:",";"],(e=>{let{theme:t}=e;return t.fontSizes[7]+"px"}),(e=>{let{theme:t}=e;return t.colors.primary.main})),K=v.ZP.div(["position:relative;"]),U=(0,v.ZP)(o.kC)(["overflow-y:auto;overflow-x:hidden;"]);function $(e){const{userHost:t,clipboardSharingEnabled:n,onDisconnect:i,canShareDirectory:s,isSharingDirectory:a,onShareDirectory:c,warnings:l,onRemoveWarning:u}=e,p=(0,v.Fg)(),d=e=>({color:e?p.colors.text.primary:p.colors.text.secondary});return r.createElement(o.tD,{height:`${z}px`,bg:E.O.dark,style:{justifyContent:"space-between"}},r.createElement(o.xv,{px:3,style:{color:p.colors.text.secondary}},t),r.createElement(o.kC,{px:3},r.createElement(o.kC,{alignItems:"center"},r.createElement(H,{style:d(a),pr:3,title:a?"Directory Sharing Enabled":"Directory Sharing Disabled"}),r.createElement(F,{style:d(n),pr:3,title:n?"Clipboard Sharing Enabled":"Clipboard Sharing Disabled"}),r.createElement(R,{warnings:l,onRemoveWarning:u})),r.createElement(O,{onDisconnect:i,showShareDirectory:s&&!a,onShareDirectory:c})))}const z=40,F=(0,v.ZP)(w.TUt)(["font-weight:",";font-size:",";align-self:'center';"],(e=>{let{theme:t}=e;return t.fontWeights.bold}),(e=>{let{theme:t}=e;return t.fontSizes[4]+"px"})),H=(0,v.ZP)(w.ot9)(["font-weight:",";font-size:",";align-self:'center';"],(e=>{let{theme:t}=e;return t.fontWeights.bold}),(e=>{let{theme:t}=e;return t.fontSizes[6]+"px"}));function q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function B(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?q(Object(n),!0).forEach((function(t){Y(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):q(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function G(){return{width:window.innerWidth,height:window.innerHeight-z}}function X(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function V(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?X(Object(n),!0).forEach((function(t){J(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):X(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function J(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ee(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Q(Object(n),!0).forEach((function(t){te(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Q(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function te(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ne(){return ne=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ne.apply(this,arguments)}function re(e){const{fetchAttempt:t,tdpConnection:n,disconnected:a,wsConnection:c,setTdpConnection:l,showAnotherSessionActiveDialog:u,setShowAnotherSessionActiveDialog:p}=e,d="processing"===t.status||"processing"===n.status,h=(()=>{const e="closed"===c&&!a&&("success"===n.status||""===n.status);let r="";return"failed"===t.status?r=t.statusText||"fetch attempt failed":"failed"===n.status?r=n.statusText||"tdp connection failed":""===n.status?r=n.statusText||"encountered a non-fatal error":e?r="Session disconnected for an unknown reason.":"processing"===t.status&&"success"===n.status&&(r="The application has detected an invalid internal application state.         Please file a bug report for this issue at         https://github.com/gravitational/teleport/issues/new?assignees=&labels=bug&template=bug_report.md"),{open:""!==r,text:r}})();if(h.open)return r.createElement(oe,ne({},e,{initTdpCli:!1,displayCanvas:!1}),r.createElement(s.ZP,{dialogCss:()=>({width:"484px"}),onClose:()=>{l((e=>""===e.status?{status:"success"}:e))},open:h.open},r.createElement(s.fK,{style:{flexDirection:"column"}},r.createElement(s.$N,null,"Error")),r.createElement(s.cZ,null,r.createElement(r.Fragment,null,r.createElement(i.b0,{children:r.createElement(r.Fragment,null,h.text)}),"Refresh the page to try again.")),r.createElement(s.cN,null,r.createElement(o.PL,{size:"large",width:"30%",onClick:()=>{window.location.reload()}},"Refresh"))));if(u){const t=!1;return r.createElement(oe,ne({},e,{initTdpCli:t,displayCanvas:!1}),r.createElement(s.ZP,{dialogCss:()=>({width:"484px"}),onClose:()=>{},open:!0},r.createElement(s.fK,{style:{flexDirection:"column"}},r.createElement(s.$N,null,"Another Session Is Active")),r.createElement(s.cZ,null,"This desktop has an active session, connecting to it may close the other session. Do you wish to continue?"),r.createElement(s.cN,null,r.createElement(o.DF,{mr:3,onClick:()=>{window.close()}},"Abort"),r.createElement(o.PL,{onClick:()=>{p(!1)}},"Continue"))))}if(a)return r.createElement(oe,ne({},e,{initTdpCli:!1,displayCanvas:!1}),r.createElement(o.xu,{textAlign:"center",m:10},r.createElement(o.xv,null,"Session successfully disconnected")));if(d){const n="processing"!==t.status;return r.createElement(oe,ne({},e,{initTdpCli:n,displayCanvas:!1}),r.createElement(o.xu,{textAlign:"center",m:10},r.createElement(o.z$,null)))}return r.createElement(oe,ne({},e,{initTdpCli:!0,displayCanvas:!0}))}function oe(e){let{setDisconnected:t,webauthn:n,tdpClient:i,username:s,hostname:l,setClipboardSharingEnabled:u,directorySharingState:p,setDirectorySharingState:d,onPngFrame:h,onClipboardData:f,onTdpError:m,onTdpWarning:g,onWsClose:y,onWsOpen:b,onKeyDown:v,onKeyUp:w,onMouseMove:E,onMouseDown:C,onMouseUp:O,onMouseWheelScroll:S,onContextMenu:x,initTdpCli:P,displayCanvas:D,clipboardSharingEnabled:j,onShareDirectory:L,warnings:k,onRemoveWarning:T,children:_}=e;return r.createElement(o.kC,{flexDirection:"column"},r.createElement($,{onDisconnect:()=>{t(!0),u(!1),d((e=>ee(ee({},e),{},{isSharing:!1}))),i.nuke()},userHost:`${s}@${l}`,canShareDirectory:p.canShare,isSharingDirectory:p.isSharing,clipboardSharingEnabled:j,onShareDirectory:L,warnings:k,onRemoveWarning:T}),_,n.requested&&r.createElement(c.Z,{onContinue:n.authenticate,onCancel:()=>{n.setState((e=>ee(ee({},e),{},{errorText:'This session requires multi factor authentication to continue. Please hit "Retry" and follow the prompts given by your browser to complete authentication.'})))},errorText:n.errorText}),r.createElement(a.Z,{style:{display:D?"flex":"none",flex:1},tdpCli:i,tdpCliInit:P,tdpCliOnPngFrame:h,tdpCliOnClipboardData:f,tdpCliOnTdpError:m,tdpCliOnTdpWarning:g,tdpCliOnWsClose:y,tdpCliOnWsOpen:b,onKeyDown:v,onKeyUp:w,onMouseMove:E,onMouseDown:C,onMouseUp:O,onMouseWheelScroll:S,onContextMenu:x}))}const ie=function(){const e=function(){const{attempt:e,run:t}=(0,u.Z)("processing"),{attempt:n,setAttempt:o}=(0,u.Z)("processing"),[i,s]=(0,r.useState)("closed"),[a,c]=(0,r.useState)(!1),[v,w]=(0,r.useState)({canShare:!1,isSharing:!1}),{username:E,desktopName:C,clusterId:O}=(0,l.UO)(),[S,x]=(0,r.useState)(""),P=navigator.userAgent.includes("Chrome"),[D,j]=(0,r.useState)(!1),[L,k]=(0,r.useState)(!1);document.title=(0,r.useMemo)((()=>`${O} â€¢ ${E}@${S}`),[O,S,E]),(0,r.useEffect)((()=>{t((()=>Promise.all([d.Z.fetchDesktop(O,C).then((e=>x(e.name))),h.ZP.fetchUserContext().then((e=>{j(e.acl.clipboardSharingEnabled&&P),w((t=>V(V({},t),{},{canShare:e.acl.directorySharingEnabled})))})),d.Z.checkDesktopIsActive(O,C).then((e=>{k(e)}))])))}),[O,C,P,t]);const[T,_]=(0,r.useState)([]),A=function(e){const{username:t,desktopName:n,clusterId:o,setTdpConnection:i,setWsConnection:s,setClipboardSharingEnabled:a,setDirectorySharingState:c,clipboardSharingEnabled:l,setWarnings:u}=e,[p,d]=(0,r.useState)(null),h=(0,r.useRef)(!1),v=(0,r.useRef)(new TextEncoder),w=(0,r.useRef)("");(0,r.useEffect)((()=>{const{width:e,height:r}=G(),i=y.Z.api.desktopWsAddr.replace(":fqdn",(0,g.Lp)()).replace(":clusterId",o).replace(":desktopName",n).replace(":token",(0,g.hP)()).replace(":username",t).replace(":width",e.toString()).replace(":height",r.toString());d(new m.pe(i))}),[o,t,n]);const{isMac:E}=(0,f.Z)(),C=(e,t)=>!("CapsLock"!==t.code||!E||(e.sendKeyboardInput(t.code,m.BN.DOWN),e.sendKeyboardInput(t.code,m.BN.UP),0)),O=e=>{l&&document.hasFocus()&&navigator.clipboard.readText().then((t=>{(0,b.Kp)(t,v.current).then((n=>{t&&n!==w.current&&(e.sendClipboardData({data:t}),w.current=n)}))}))};return{tdpClient:p,onPngFrame:(e,t)=>{h.current||((e=>{const{width:t,height:n}=G();e.width=t,e.height=n})(e.canvas),i({status:"success"}),h.current=!0),e.drawImage(t.data,t.left,t.top)},onTdpError:e=>{c((e=>B(B({},e),{},{isSharing:!1}))),a(!1),i({status:"failed",statusText:e.message})},onClipboardData:async e=>{if(l&&document.hasFocus()&&e.data){navigator.clipboard.writeText(e.data);let t=await(0,b.Kp)(e.data,v.current);w.current=t}},onWsClose:()=>{s("closed")},onWsOpen:()=>{s("open")},onKeyDown:(e,t)=>{t.preventDefault(),C(e,t)||(e.sendKeyboardInput(t.code,m.BN.DOWN),"MetaRight"!==t.code&&"MetaLeft"!==t.code&&"AltRight"!==t.code&&"AltLeft"!==t.code&&O(e))},onKeyUp:(e,t)=>{t.preventDefault(),C(e,t)||e.sendKeyboardInput(t.code,m.BN.UP)},onMouseMove:(e,t,n)=>{const r=t.getBoundingClientRect(),o=n.clientX-r.left,i=n.clientY-r.top;e.sendMouseMove(o,i)},onMouseDown:(e,t)=>{0!==t.button&&1!==t.button&&2!==t.button||e.sendMouseButton(t.button,m.BN.DOWN),O(e)},onMouseUp:(e,t)=>{0!==t.button&&1!==t.button&&2!==t.button||e.sendMouseButton(t.button,m.BN.UP)},onMouseWheelScroll:(e,t)=>{t.preventDefault(),t.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(t.deltaX&&e.sendMouseWheelScroll(m.Yc.HORIZONTAL,-t.deltaX),t.deltaY&&e.sendMouseWheelScroll(m.Yc.VERTICAL,-t.deltaY))},onContextMenu:()=>!1,onTdpWarning:e=>{u((t=>[...t,{content:e,severity:"warn",id:crypto.randomUUID()}]))}}}({username:E,desktopName:C,clusterId:O,setTdpConnection:o,setWsConnection:s,setClipboardSharingEnabled:j,setDirectorySharingState:w,clipboardSharingEnabled:D,setWarnings:_}),W=A.tdpClient,M=(0,p.Z)(W);return V({hostname:S,username:E,clipboardSharingEnabled:D,setClipboardSharingEnabled:j,directorySharingState:v,setDirectorySharingState:w,isUsingChrome:P,fetchAttempt:e,tdpConnection:n,wsConnection:i,disconnected:a,setDisconnected:c,webauthn:M,setTdpConnection:o,showAnotherSessionActiveDialog:L,setShowAnotherSessionActiveDialog:k,onShareDirectory:()=>{try{window.showDirectoryPicker().then((e=>{w((e=>V(V({},e),{},{isSharing:!0}))),W.addSharedDirectory(e),W.sendSharedDirectoryAnnounce()})).catch((e=>{w((e=>V(V({},e),{},{isSharing:!1}))),_((t=>[...t,{id:crypto.randomUUID(),severity:"warn",content:"Failed to open the directory picker: "+e.message}]))}))}catch(e){w((e=>V(V({},e),{},{isSharing:!1}))),_((t=>[...t,{id:crypto.randomUUID(),severity:"warn",content:"Encountered an error while attempting to share a directory: "+e.message+'. \n\nYour user role supports directory sharing over desktop access,           however this feature is only available by default on some Chromium           based browsers like Google Chrome or Microsoft Edge. Brave users can           use the feature by navigating to brave://flags/#file-system-access-api           and selecting "Enable". If you\'re not already, please switch to a supported browser.'}]))}},warnings:T,onRemoveWarning:e=>{_((t=>t.filter((t=>t.id!==e))))}},A)}();return r.createElement(re,e)}},4523:(e,t,n)=>{n.d(t,{Z:()=>a});var r=n(2784),o=n(9161),i=n(9124),s=n(7849);const a=function(e){let{onContinue:t,onCancel:n,errorText:a}=e;return r.createElement(o.ZP,{dialogCss:()=>({width:"400px"}),open:!0},r.createElement(o.fK,{style:{flexDirection:"column"}},r.createElement(o.$N,{textAlign:"center"},"Verify Your Identity")),r.createElement(o.cZ,{mb:6},a&&r.createElement(i.b0,{mt:2,width:"100%"},a),r.createElement(s.xv,{textAlign:"center"},"Re-authentication is required. Follow the prompts given by your browser to complete authentication.")),r.createElement(o.cN,{textAlign:"center"},r.createElement(s.DF,{onClick:t,mr:3,width:"130px"},a?"Retry":"Verify"),r.createElement(s.PL,{onClick:n},"Cancel")))}},2070:(e,t,n)=>{n.d(t,{Z:()=>l});var r=n(2784),o=n(9175),i=n(9376);function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e){const[t,n]=(0,r.useState)({requested:!1,errorText:"",publicKey:null}),s=e=>{const r=JSON.parse(e),o=(0,i.ee)(r).webauthnPublicKey;n(a(a({},t),{},{requested:!0,publicKey:o}))};return(0,r.useEffect)((()=>{if(e)return e.on(o.y2.WEBAUTHN_CHALLENGE,s),()=>{e.removeListener(o.y2.WEBAUTHN_CHALLENGE,s)}}),[e]),{errorText:t.errorText,requested:t.requested,authenticate:function(){if(window.PublicKeyCredential)navigator.credentials.get({publicKey:t.publicKey}).then((r=>{const o=(0,i.oH)(r);e.sendWebAuthn(o),n(a(a({},t),{},{requested:!1,errorText:""}))})).catch((e=>{n(a(a({},t),{},{errorText:e.message}))}));else{const e="This browser does not support WebAuthn required for hardware tokens,       please try the latest version of Chrome, Firefox or Safari.";n(a(a({},t),{},{errorText:e}))}},setState:n}}},3228:(e,t,n)=>{n.d(t,{ES:()=>s,Kp:()=>o,RB:()=>r,Sl:()=>i});const r=e=>{const t=document.createElement("a");t.setAttribute("href",`${e}`),t.setAttribute("target","_blank"),t.style.display="none",document.body.appendChild(t),t.click(),document.body.removeChild(t)};async function o(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new TextEncoder;const n=t.encode(e),r=await crypto.subtle.digest("SHA-256",n),o=Array.from(new Uint8Array(r)),i=o.map((e=>e.toString(16).padStart(2,"0"))).join("");return i}function i(e){let{authType:t,clusterId:n,username:r,accessRequestId:o}=e;const{hostname:i,port:s}=window.location;return`tsh login --proxy=${i}:${s||"443"} ${"local"===t?`--auth=${t} --user=${r} `:""}${n}${o?` --request-id=${o}`:""}`}function s(e,t){return e&&t?e.filter((e=>!t.includes(e))):[]}},2699:e=>{var t,n="object"==typeof Reflect?Reflect:null,r=n&&"function"==typeof n.apply?n.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};t=n&&"function"==typeof n.ownKeys?n.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var o=Number.isNaN||function(e){return e!=e};function i(){i.init.call(this)}e.exports=i,e.exports.once=function(e,t){return new Promise((function(n,r){function o(n){e.removeListener(t,i),r(n)}function i(){"function"==typeof e.removeListener&&e.removeListener("error",o),n([].slice.call(arguments))}m(e,t,i,{once:!0}),"error"!==t&&function(e,t,n){"function"==typeof e.on&&m(e,"error",t,{once:!0})}(e,o)}))},i.EventEmitter=i,i.prototype._events=void 0,i.prototype._eventsCount=0,i.prototype._maxListeners=void 0;var s=10;function a(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function c(e){return void 0===e._maxListeners?i.defaultMaxListeners:e._maxListeners}function l(e,t,n,r){var o,i,s,l;if(a(n),void 0===(i=e._events)?(i=e._events=Object.create(null),e._eventsCount=0):(void 0!==i.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),i=e._events),s=i[t]),void 0===s)s=i[t]=n,++e._eventsCount;else if("function"==typeof s?s=i[t]=r?[n,s]:[s,n]:r?s.unshift(n):s.push(n),(o=c(e))>0&&s.length>o&&!s.warned){s.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=e,u.type=t,u.count=s.length,l=u,console&&console.warn&&console.warn(l)}return e}function u(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function p(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},o=u.bind(r);return o.listener=n,r.wrapFn=o,o}function d(e,t,n){var r=e._events;if(void 0===r)return[];var o=r[t];return void 0===o?[]:"function"==typeof o?n?[o.listener||o]:[o]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(o):f(o,o.length)}function h(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function f(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}function m(e,t,n,r){if("function"==typeof e.on)r.once?e.once(t,n):e.on(t,n);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function o(i){r.once&&e.removeEventListener(t,o),n(i)}))}}Object.defineProperty(i,"defaultMaxListeners",{enumerable:!0,get:function(){return s},set:function(e){if("number"!=typeof e||e<0||o(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");s=e}}),i.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},i.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||o(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},i.prototype.getMaxListeners=function(){return c(this)},i.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var o="error"===e,i=this._events;if(void 0!==i)o=o&&void 0===i.error;else if(!o)return!1;if(o){var s;if(t.length>0&&(s=t[0]),s instanceof Error)throw s;var a=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw a.context=s,a}var c=i[e];if(void 0===c)return!1;if("function"==typeof c)r(c,this,t);else{var l=c.length,u=f(c,l);for(n=0;n<l;++n)r(u[n],this,t)}return!0},i.prototype.addListener=function(e,t){return l(this,e,t,!1)},i.prototype.on=i.prototype.addListener,i.prototype.prependListener=function(e,t){return l(this,e,t,!0)},i.prototype.once=function(e,t){return a(t),this.on(e,p(this,e,t)),this},i.prototype.prependOnceListener=function(e,t){return a(t),this.prependListener(e,p(this,e,t)),this},i.prototype.removeListener=function(e,t){var n,r,o,i,s;if(a(t),void 0===(r=this._events))return this;if(void 0===(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(o=-1,i=n.length-1;i>=0;i--)if(n[i]===t||n[i].listener===t){s=n[i].listener,o=i;break}if(o<0)return this;0===o?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,o),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,s||t)}return this},i.prototype.off=i.prototype.removeListener,i.prototype.removeAllListeners=function(e){var t,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var o,i=Object.keys(n);for(r=0;r<i.length;++r)"removeListener"!==(o=i[r])&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},i.prototype.listeners=function(e){return d(this,e,!0)},i.prototype.rawListeners=function(e){return d(this,e,!1)},i.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):h.call(e,t)},i.prototype.listenerCount=h,i.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]}}}]);